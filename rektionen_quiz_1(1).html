<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ù–µ–º—Å–∫–∏ –†–µ–∫—Ü–∏–∏ 255 - –§–∏–Ω–∞–ª–Ω–∞ –í–µ—Ä—Å–∏—è</title>
    <style>
        :root { --primary: #1a2a6c; --secondary: #b21f1f; --success: #4caf50; --error: #f44336; --akk: #007bff; --dat: #dc3545; }
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: -apple-system, sans-serif; background: #f0f2f5; min-height: 100vh; padding: 10px; }
        .container { max-width: 550px; margin: 0 auto; }
        .stats-bar { display: flex; justify-content: space-around; background: #333; color: white; padding: 10px; border-radius: 12px; margin-bottom: 10px; font-weight: bold; }
        .panel { background: white; padding: 12px; border-radius: 15px; margin-bottom: 10px; display: flex; flex-direction: column; gap: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .btn-group { display: flex; gap: 5px; flex-wrap: wrap; }
        .tgl { flex: 1; min-width: 70px; padding: 10px 5px; border: 2px solid var(--primary); background: white; border-radius: 10px; cursor: pointer; font-weight: bold; font-size: 0.8em; }
        .tgl.active { background: var(--primary); color: white; }
        .quiz-config { padding: 10px; border-top: 1px solid #eee; margin-top: 5px; display: flex; align-items: center; gap: 10px; font-size: 0.9em; font-weight: bold; }
        input[type="range"] { flex: 1; cursor: pointer; }
        .flip-container { perspective: 1000px; width: 100%; height: 280px; margin-bottom: 20px; cursor: pointer; }
        .flip-inner { position: relative; width: 100%; height: 100%; transition: transform 0.6s; transform-style: preserve-3d; }
        .flip-container.flipped .flip-inner { transform: rotateY(180deg); }
        .card-face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; display: flex; align-items: center; justify-content: center; text-align: center; padding: 25px; border-radius: 20px; background: white; box-shadow: 0 8px 20px rgba(0,0,0,0.15); font-size: 1.5em; font-weight: bold; }
        .card-back { transform: rotateY(180deg); background: #fdfdfd; }
        .main-card { background: white; border-radius: 20px; padding: 25px; min-height: 380px; box-shadow: 0 8px 20px rgba(0,0,0,0.15); display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .txt-akk { color: var(--akk); }
        .txt-dat { color: var(--dat); }
        .opt-grid { display: grid; grid-template-columns: 1fr; gap: 10px; width: 100%; margin-top: 15px; }
        .opt { padding: 14px; border: 2px solid #eee; border-radius: 12px; background: #fdfdfd; cursor: pointer; font-weight: bold; text-align: left; }
        .opt.correct { background: var(--success) !important; color: white; }
        .opt.wrong { background: var(--error) !important; color: white; }
        input[type="text"] { width: 100%; padding: 15px; border: 2px solid #ddd; border-radius: 12px; font-size: 1.2em; text-align: center; margin-top: 15px; outline: none; }
        .feedback { margin-top: 15px; font-weight: bold; min-height: 1.5em; text-align: center; }
        .controls { display: flex; gap: 10px; width: 100%; margin-top: 15px; }
        .btn { flex: 1; padding: 15px; border: none; border-radius: 12px; cursor: pointer; font-weight: bold; background: #ddd; }
        .btn-next { background: var(--primary); color: white; }
    </style>
</head>
<body>

<div class="container">
    <div class="stats-bar">
        <span>–ö–∞—Ä—Ç–∞: <span id="stat-idx">1</span> / <span id="stat-total">255</span></span>
        <span>–ì—Ä–µ—à–∫–∏: <span id="stat-err" style="color:#ff8a8a">0</span></span>
    </div>

    <div class="panel">
        <div class="btn-group">
            <button class="tgl active" id="m-fc" onclick="setMode('fc')">–ö–∞—Ä—Ç–∏</button>
            <button class="tgl" id="m-qz" onclick="setMode('qz')">–¢–µ—Å—Ç</button>
            <button class="tgl" id="m-wr" onclick="setMode('wr')">–ü–∏—Å–∞–Ω–µ</button>
        </div>
        <div class="btn-group" style="margin-top:5px">
            <button class="tgl active" id="s-bgde" onclick="setSide('bgde')">BG ‚ûî DE</button>
            <button class="tgl" id="s-debg" onclick="setSide('debg')">DE ‚ûî BG</button>
            <button class="tgl" style="border-color:#ffa500; color:#ffa500" onclick="shuffleData()">üîÄ –†–∞–∑–±—ä—Ä–∫–∞–π</button>
        </div>
        <div class="quiz-config">
            <span>–†–∞–∑–º–µ—Ä:</span>
            <input type="range" id="size-slider" min="5" max="255" value="255" oninput="updateSizeLabel(this.value)">
            <span id="size-val">255</span>
            <button class="tgl" style="flex:0.5; min-width:50px" onclick="applySize()">OK</button>
        </div>
    </div>

    <div id="fc-container" class="flip-container" onclick="this.classList.toggle('flipped')">
        <div class="flip-inner">
            <div class="card-face card-front" id="fc-front"></div>
            <div class="card-face card-back" id="fc-back"></div>
        </div>
    </div>

    <div id="main-area" class="main-card" style="display:none">
        <div id="qz-area" style="width:100%">
            <div id="qz-q" style="font-weight:bold; text-align:center; font-size:1.4em;"></div>
            <div id="qz-opts" class="opt-grid"></div>
        </div>
        <div id="wr-area" style="width:100%; display:none;">
            <div id="wr-q" style="font-weight:bold; text-align:center; font-size:1.4em;"></div>
            <input type="text" id="wr-i" placeholder="–ü–∏—à–∏ —Ç—É–∫..." autocomplete="off" onkeypress="if(event.key==='Enter') checkWrite()">
            <div id="wr-f" class="feedback"></div>
            <button class="btn btn-next" style="width:100%; margin-top:10px" onclick="checkWrite()">–ü—Ä–æ–≤–µ—Ä–∏</button>
        </div>
    </div>

    <div class="controls">
        <button class="btn" onclick="move(-1)">‚Üê –ü—Ä–µ—Ö–æ–¥–Ω–∞</button>
        <button class="btn btn-next" onclick="move(1)">–°–ª–µ–¥–≤–∞—â–∞ ‚Üí</button>
    </div>
</div>

<script>
// –ü–™–õ–ï–ù –°–ü–ò–°–™–ö –° –ü–û–ü–†–ê–í–ö–ò (–ë–ï–ó –ö–ò–†–ò–õ–ò–¶–ê –í –ù–ï–ú–°–ö–ò–Ø)
const baseData = [
    {"de": "abbiegen in + A", "bg": "–∑–∞–≤–∏–≤–∞–º –Ω–∞"}, {"de": "abh√§ngen von + D", "bg": "–∑–∞–≤–∏—Å–∏ –æ—Ç"}, {"de": "abholen von + D", "bg": "–ø–æ—Å—Ä–µ—â–∞–º –æ—Ç (–Ω—è–∫—ä–¥–µ)"}, {"de": "abschreiben von + D", "bg": "–ø—Ä–µ–ø–∏—Å–≤–∞–º –æ—Ç"}, {"de": "achten auf + A", "bg": "–≤–Ω–∏–º–∞–≤–∞–º –∑–∞ / –æ–±—Ä—ä—â–∞–º –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞"}, {"de": "am√ºsieren (sich) √ºber + A", "bg": "–∑–∞–±–∞–≤–ª—è–≤–∞–º —Å–µ –Ω–∞"}, {"de": "anfangen mit + D", "bg": "–∑–∞–ø–æ—á–≤–∞–º —Å"}, {"de": "ankommen an + D", "bg": "–ø—Ä–∏—Å—Ç–∏–≥–∞–º –≤"}, {"de": "ankommen auf + A", "bg": "–∑–∞–≤–∏—Å–∏ –æ—Ç"}, {"de": "anmelden (sich) bei + D f√ºr + A", "bg": "–∑–∞–ø–∏—Å–≤–∞–º —Å–µ –ø—Ä–∏... –∑–∞..."}, {"de": "anpassen (sich) an + A", "bg": "–Ω–∞–≥–∞–∂–¥–∞–º —Å–µ –∫—ä–º"}, {"de": "antworten auf + A", "bg": "–æ—Ç–≥–æ–≤–∞—Ä—è–º –Ω–∞"}, {"de": "arbeiten an + D", "bg": "—Ä–∞–±–æ—Ç—è –≤—ä—Ä—Ö—É"}, {"de": "√§rgern (sich) √ºber + A", "bg": "—è–¥–æ—Å–≤–∞–º —Å–µ –Ω–∞"}, {"de": "aufh√∂ren mit + D", "bg": "–ø—Ä–µ—Å—Ç–∞–≤–∞–º / —Å–ø–∏—Ä–∞–º —Å"}, {"de": "aufpassen auf + A", "bg": "–Ω–∞–≥–ª–µ–∂–¥–∞–º / –≤–Ω–∏–º–∞–≤–∞–º –∑–∞"}, {"de": "aufregen (sich) √ºber + A", "bg": "–≤—ä–ª–Ω—É–≤–∞–º —Å–µ –∑–∞"}, {"de": "aufsteigen aus + D", "bg": "—Å–ª–∏–∑–∞–º –æ—Ç"}, {"de": "ausgehen mit + D", "bg": "–∏–∑–ª–∏–∑–∞–º —Å"}, {"de": "√§u√üern (sich) √ºber + A", "bg": "–∏–∑–∫–∞–∑–≤–∞–º —Å–µ –∑–∞"}, {"de": "bedanken (sich) bei + D f√ºr + A", "bg": "–±–ª–∞–≥–æ–¥–∞—Ä—è –Ω–∞ –Ω—è–∫–æ–≥–æ –∑–∞ –Ω–µ—â–æ"}, {"de": "befassen (sich) mit + D", "bg": "–∑–∞–Ω–∏–º–∞–≤–∞–º —Å–µ —Å"}, {"de": "begeistern (sich) f√ºr + A", "bg": "–≤—ä–æ–¥—É—à–µ–≤—è–≤–∞–º —Å–µ –∑–∞"}, {"de": "beginnen mit + D", "bg": "–∑–∞–ø–æ—á–≤–∞–º —Å"}, {"de": "beitragen zu + D", "bg": "–¥–æ–ø—Ä–∏–Ω–∞—Å—è–º –∑–∞"}, {"de": "beklagen (sich) bei + D √ºber + A", "bg": "–æ–ø–ª–∞–∫–≤–∞–º —Å–µ –Ω–∞ –Ω—è–∫–æ–≥–æ –æ—Ç –Ω–µ—â–æ"}, {"de": "bem√ºhen (sich) um + A", "bg": "—Å—Ç–∞—Ä–∞—è —Å–µ –∑–∞"}, {"de": "beneiden um + A", "bg": "–∑–∞–≤–∏–∂–¥–∞–º –∑–∞"}, {"de": "benennen nach + D", "bg": "–Ω–∞–∑–æ–≤–∞–≤–∞–º –Ω–∞"}, {"de": "berichten √ºber + A", "bg": "—Å—ä–æ–±—â–∞–≤–∞–º –∑–∞"}, {"de": "besch√§ftigen (sich) mit + D", "bg": "–∑–∞–Ω–∏–º–∞–≤–∞–º —Å–µ —Å"}, {"de": "beschweren (sich) bei + D √ºber + A", "bg": "–æ–ø–ª–∞–∫–≤–∞–º —Å–µ –Ω–∞ –Ω—è–∫–æ–≥–æ –æ—Ç –Ω–µ—â–æ"}, {"de": "bestehen aus + D", "bg": "—Å—ä—Å—Ç–æ—è —Å–µ –æ—Ç"}, {"de": "bestehen auf + D", "bg": "–Ω–∞—Å—Ç–æ—è–≤–∞–º –Ω–∞"}, {"de": "beteiligen (sich) an + D", "bg": "—É—á–∞—Å—Ç–≤–∞–º –≤"}, {"de": "bewahren vor + D", "bg": "–ø–∞–∑—è –æ—Ç"}, {"de": "bewerben (sich) um + A", "bg": "–∫–∞–Ω–¥–∏–¥–∞—Ç—Å—Ç–≤–∞–º –∑–∞"}, {"de": "beziehen (sich) auf + A", "bg": "–æ—Ç–Ω–∞—Å—è–º —Å–µ –¥–æ"}, {"de": "bitten um + A", "bg": "–º–æ–ª—è –∑–∞"}, {"de": "danken f√ºr + A", "bg": "–±–ª–∞–≥–æ–¥–∞—Ä—è –∑–∞"}, {"de": "denken an + A", "bg": "–º–∏—Å–ª—è –∑–∞"}, {"de": "dienen als / zu + D", "bg": "—Å–ª—É–∂–∞ –∫–∞—Ç–æ / –∑–∞"}, {"de": "diskutieren √ºber + A", "bg": "–¥–∏—Å–∫—É—Ç–∏—Ä–∞–º –∑–∞"}, {"de": "einladen zu + D", "bg": "–∫–∞–Ω—è –Ω–∞"}, {"de": "einsteigen in + A", "bg": "–∫–∞—á–≤–∞–º —Å–µ –≤"}, {"de": "einverstanden sein mit + D", "bg": "—Å—ä–≥–ª–∞—Å–µ–Ω —Å—ä–º —Å"}, {"de": "ekeln (sich) vor + D", "bg": "–æ—Ç–≤—Ä–∞—â–∞–≤–∞–º —Å–µ –æ—Ç"}, {"de": "emp√∂ren (sich) √ºber + A", "bg": "–≤—ä–∑–º—É—â–∞–≤–∞–º —Å–µ –æ—Ç"}, {"de": "entscheiden (sich) f√ºr + A", "bg": "—Ä–µ—à–∞–≤–∞–º —Å–µ –∑–∞"}, {"de": "entschlie√üen (sich) zu + D", "bg": "—Ä–µ—à–∞–≤–∞–º —Å–µ –Ω–∞"}, {"de": "entschuldigen (sich) bei + D f√ºr + A", "bg": "–∏–∑–≤–∏–Ω—è–≤–∞–º —Å–µ –Ω–∞ –Ω—è–∫–æ–≥–æ –∑–∞ –Ω–µ—â–æ"}, {"de": "erfahren √ºber + A", "bg": "–Ω–∞—É—á–∞–≤–∞–º –∑–∞"}, {"de": "erinnern (sich) an + A", "bg": "—Å–ø–æ–º–Ω—è–º —Å–∏ –∑–∞"}, {"de": "erkennen an + D", "bg": "—Ä–∞–∑–ø–æ–∑–Ω–∞–≤–∞–º –ø–æ"}, {"de": "erkundigen (sich) bei + D nach + D", "bg": "–æ—Å–≤–µ–¥–æ–º—è–≤–∞–º —Å–µ –æ—Ç –Ω—è–∫–æ–≥–æ –∑–∞ –Ω–µ—â–æ"}, {"de": "erschrecken vor + D", "bg": "—É–ø–ª–∞—à–≤–∞–º —Å–µ –æ—Ç"}, {"de": "erz√§hlen √ºber + A / von + D", "bg": "—Ä–∞–∑–∫–∞–∑–≤–∞–º –∑–∞"}, {"de": "es geht um + A", "bg": "—Å—Ç–∞–≤–∞ –¥—É–º–∞ –∑–∞"}, {"de": "fliehen vor + D", "bg": "–±—è–≥–∞–º –æ—Ç"}, {"de": "fragen nach + D", "bg": "–ø–∏—Ç–∞–º –∑–∞"}, {"de": "freuen (sich) auf + A", "bg": "—Ä–∞–¥–≤–∞–º —Å–µ –Ω–∞ (–±—ä–¥–µ—â–µ)"}, {"de": "freuen (sich) √ºber + A", "bg": "—Ä–∞–¥–≤–∞–º —Å–µ –Ω–∞ (–º–∏–Ω–∞–ª–æ/—Å–µ–≥–∞)"}, {"de": "f√ºhren zu + D", "bg": "–≤–æ–¥—è –¥–æ"}, {"de": "f√ºrchten (sich) vor + D", "bg": "–±–æ—è —Å–µ –æ—Ç"}, {"de": "geh√∂ren zu + D", "bg": "–ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞ –∫—ä–º"}, {"de": "gew√∂hnen (sich) an + A", "bg": "—Å–≤–∏–∫–≤–∞–º —Å"}, {"de": "glauben an + A", "bg": "–≤—è—Ä–≤–∞–º –≤"}, {"de": "grenzen an + A", "bg": "–≥—Ä–∞–Ω–∏—á–∞ —Å"}, {"de": "halten (sich) an + A", "bg": "–ø—Ä–∏–¥—ä—Ä–∂–∞–º —Å–µ –∫—ä–º"}, {"de": "halten f√ºr + A", "bg": "—Å—á–∏—Ç–∞–º –∑–∞"}, {"de": "handeln von + D", "bg": "—Ä–∞–∑–∫–∞–∑–≤–∞ –∑–∞"}, {"de": "handeln (sich) um + A", "bg": "–∫–∞—Å–∞–µ —Å–µ –∑–∞"}, {"de": "helfen bei + D", "bg": "–ø–æ–º–∞–≥–∞–º –ø—Ä–∏"}, {"de": "herrschen √ºber + A", "bg": "–≥–æ—Å–ø–æ–¥—Å—Ç–≤–∞–º –Ω–∞–¥"}, {"de": "hinweisen auf + A", "bg": "–æ–±—Ä—ä—â–∞–º –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ / –ø–æ—Å–æ—á–≤–∞–º"}, {"de": "hoffen auf + A", "bg": "–Ω–∞–¥—è–≤–∞–º —Å–µ –Ω–∞"}, {"de": "h√∂ren von + D", "bg": "—á—É–≤–∞–º –∑–∞"}, {"de": "informieren (sich) √ºber + A", "bg": "–∏–Ω—Ñ–æ—Ä–º–∏—Ä–∞–º —Å–µ –∑–∞"}, {"de": "interessieren (sich) f√ºr + A", "bg": "–∏–Ω—Ç–µ—Ä–µ—Å—É–≤–∞–º —Å–µ –æ—Ç"}, {"de": "k√§mpfen –∑–∞/–ø—Ä–æ—Ç–∏–≤ + A", "bg": "–±–æ—Ä—è —Å–µ –∑–∞/–ø—Ä–æ—Ç–∏–≤"}, {"de": "konzentrieren (sich) auf + A", "bg": "–∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—Ä–∞–º —Å–µ –≤—ä—Ä—Ö—É"}, {"de": "k√ºmmern (sich) um + A", "bg": "–≥—Ä–∏–∂–∞ —Å–µ –∑–∞"}, {"de": "lachen √ºber + A", "bg": "—Å–º–µ—è —Å–µ –Ω–∞"}, {"de": "l√§cheln √ºber + A", "bg": "—É—Å–º–∏—Ö–≤–∞–º —Å–µ –Ω–∞"}, {"de": "leiden an + D", "bg": "—Å—Ç—Ä–∞–¥–∞–º –æ—Ç (–±–æ–ª–µ—Å—Ç)"}, {"de": "leiden unter + D", "bg": "—Å—Ç—Ä–∞–¥–∞–º –æ—Ç (–æ–±—Å—Ç–æ—è—Ç–µ–ª—Å—Ç–≤–∞)"}, {"de": "liegen an + D", "bg": "–¥—ä–ª–∂–∏ —Å–µ –Ω–∞"}, {"de": "mangeln an + D", "bg": "–ª–∏–ø—Å–∞ –Ω–∞"}, {"de": "meinen zu + D", "bg": "–∏–º–∞–º –º–Ω–µ–Ω–∏–µ –∑–∞"}, {"de": "melden (sich) bei + D", "bg": "–æ–±–∞–∂–¥–∞–º —Å–µ –Ω–∞"}, {"de": "nachdenken √ºber + A", "bg": "—Ä–∞–∑–º–∏—à–ª—è–≤–∞–º –≤—ä—Ä—Ö—É"}, {"de": "nachschlagen in + D", "bg": "–ø—Ä–æ–≤–µ—Ä—è–≤–∞–º –≤ —Ä–µ—á–Ω–∏–∫"}, {"de": "passen zu + D", "bg": "–ø–∞—Å–≤–∞ –Ω–∞"}, {"de": "r√§chen (sich) an + D", "bg": "–æ—Ç–º—ä—â–∞–≤–∞–º —Å–∏ –Ω–∞"}, {"de": "reagieren auf + A", "bg": "—Ä–µ–∞–≥–∏—Ä–∞–º –Ω–∞"}, {"de": "rechnen mit + D", "bg": "—Ä–∞–∑—á–∏—Ç–∞–º –Ω–∞ / –ø—Ä–µ–¥–≤–∏–∂–¥–∞–º"}, {"de": "reden √ºber + A", "bg": "–≥–æ–≤–æ—Ä—è –∑–∞"}, {"de": "retten vor + D", "bg": "—Å–ø–∞—Å—è–≤–∞–º –æ—Ç"}, {"de": "riechen nach + D", "bg": "–º–∏—Ä–∏—à–µ –Ω–∞"}, {"de": "richten (sich) nach + D", "bg": "—Å—ä–æ–±—Ä–∞–∑—è–≤–∞–º —Å–µ —Å"}, {"de": "sagen zu + D", "bg": "–∫–∞–∑–≤–∞–º –Ω–∞"}, {"de": "sch√§men (sich) vor + D", "bg": "—Å—Ä–∞–º—É–≤–∞–º —Å–µ –æ—Ç"}, {"de": "schauen auf + A", "bg": "–≥–ª–µ–¥–∞–º –∫—ä–º"}, {"de": "schimpfen √ºber + A", "bg": "—Ä—É–≥–∞—è –∑–∞"}, {"de": "schmecken nach + D", "bg": "–∏–º–∞ –≤–∫—É—Å –Ω–∞"}, {"de": "schreiben an + A", "bg": "–ø–∏—à–∞ –Ω–∞"}, {"de": "sch√ºtzen vor + D", "bg": "–ø–∞–∑—è –æ—Ç"}, {"de": "sehnen (sich) nach + D", "bg": "–∫–æ–ø–Ω–µ—è –∑–∞"}, {"de": "siegen √ºber + A", "bg": "–ø–æ–±–µ–∂–¥–∞–≤–∞–º –Ω–∞–¥"}, {"de": "sorgen f√ºr + A", "bg": "–≥—Ä–∏–∂–∞ —Å–µ –∑–∞"}, {"de": "sprechen mit + D", "bg": "–≥–æ–≤–æ—Ä—è —Å"}, {"de": "stammen aus + D", "bg": "–ø—Ä–æ–∏–∑—Ö–æ–∂–¥–∞–º –æ—Ç"}, {"de": "staunen √ºber + A", "bg": "–¥–∏–≤—è —Å–µ –Ω–∞"}, {"de": "sterben an + D", "bg": "—É–º–∏—Ä–∞–º –æ—Ç"}, {"de": "sto√üen auf + A", "bg": "–Ω–∞—Ç—ä–∫–≤–∞–º —Å–µ –Ω–∞"}, {"de": "st√∂ren bei + D", "bg": "–ø—Ä–µ—á–∞ –ø—Ä–∏"}, {"de": "streiten (sich) mit + D", "bg": "–∫–∞—Ä–∞–º —Å–µ —Å"}, {"de": "suchen nach + D", "bg": "—Ç—ä—Ä—Å—è –Ω–µ—â–æ"}, {"de": "telefonieren mit + D", "bg": "–≥–æ–≤–æ—Ä—è –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ —Å"}, {"de": "teilnehmen an + D", "bg": "—É—á–∞—Å—Ç–≤–∞–º –≤"}, {"de": "tr√§umen von + D", "bg": "–º–µ—á—Ç–∞—è –∑–∞"}, {"de": "trennen (sich) von + D", "bg": "—Ä–∞–∑–¥–µ–ª—è–º —Å–µ –æ—Ç"}, {"de": "trinken auf + A", "bg": "–ø–∏—è –∑–∞ –∑–¥—Ä–∞–≤–µ"}, {"de": "√ºberzeugen (sich) von + D", "bg": "—É–±–µ–∂–¥–∞–≤–∞–º —Å–µ –≤"}, {"de": "umdrehen (sich) nach + D", "bg": "–æ–±—Ä—ä—â–∞–º —Å–µ —Å–ª–µ–¥"}, {"de": "umgeben von + D", "bg": "–∑–∞–æ–±–∏–∫–æ–ª–µ–Ω –æ—Ç"}, {"de": "unterhalten (sich) mit + D", "bg": "—Ä–∞–∑–≥–æ–≤–∞—Ä—è–º —Å"}, {"de": "unterscheiden (sich) von + D", "bg": "—Ä–∞–∑–ª–∏—á–∞–≤–∞–º —Å–µ –æ—Ç"}, {"de": "verabschieden (sich) von + D", "bg": "—Å–±–æ–≥—É–≤–∞–º —Å–µ —Å"}, {"de": "verf√º–≥–µ–Ω √ºber + A", "bg": "—Ä–∞–∑–ø–æ–ª–∞–≥–∞–º —Å"}, {"de": "verlassen (sich) auf + A", "bg": "—Ä–∞–∑—á–∏—Ç–∞–º –Ω–∞"}, {"de": "verlieben (sich) in + A", "bg": "–≤–ª—é–±–≤–∞–º —Å–µ –≤"}, {"de": "verzichten auf + A", "bg": "–æ—Ç–∫–∞–∑–≤–∞–º —Å–µ –æ—Ç"}, {"de": "verzweifeln an + D", "bg": "–æ—Ç—á–∞–π–≤–∞–º —Å–µ –æ—Ç"}, {"de": "vorbeifahren an + D", "bg": "–º–∏–Ω–∞–≤–∞–º –ø–æ–∫—Ä–∞–π (–ú–ü–°)"}, {"de": "vorbeigehen an + D", "bg": "–º–∏–Ω–∞–≤–∞–º –ø–æ–∫—Ä–∞–π (–ø–µ—à–∞)"}, {"de": "vorbereiten (sich) –Ω–∞ + A", "bg": "–ø–æ–¥–≥–æ—Ç–≤—è–º —Å–µ –∑–∞"}, {"de": "warten –Ω–∞ + A", "bg": "—á–∞–∫–∞–º –∑–∞"}, {"de": "warnen vor + D", "bg": "–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–≤–∞–º –∑–∞"}, {"de": "weinen √ºber + A", "bg": "–ø–ª–∞—á–∞ –∑–∞"}, {"de": "wenden (sich) an + A", "bg": "–æ–±—Ä—ä—â–∞–º —Å–µ –∫—ä–º"}, {"de": "wissen √ºber + A", "bg": "–∑–Ω–∞—è –∑–∞"}, {"de": "wundern (sich) √ºber + A", "bg": "—á—É–¥—è —Å–µ –Ω–∞"}, {"de": "zeugen von + D", "bg": "—Å–≤–∏–¥–µ—Ç–µ–ª—Å—Ç–≤–∞–º –∑–∞"}, {"de": "zittern vor + D", "bg": "—Ç—Ä–µ–ø–µ—Ä—è –æ—Ç"}, {"de": "zweifeln an + D", "bg": "—Å—ä–º–Ω—è–≤–∞–º —Å–µ –≤"},
    {"de": "anrufen bei + D", "bg": "–æ–±–∞–∂–¥–∞–º —Å–µ –≤"}, {"de": "ausgeben –∑–∞ + A", "bg": "—Ö–∞—Ä—á–∞ –∑–∞"}, {"de": "basieren auf + D", "bg": "–±–∞–∑–∏—Ä–∞–º —Å–µ –Ω–∞"}, {"de": "beruhen –Ω–∞ + D", "bg": "–æ—Å–Ω–æ–≤–∞–≤–∞–º —Å–µ –Ω–∞"}, {"de": "sich binden an + A", "bg": "–æ–±–≤—ä—Ä–∑–≤–∞–º —Å–µ —Å"}, {"de": "einladen zu + D", "bg": "–∫–∞–Ω—è –Ω–∞ (—Å—ä–±–∏—Ç–∏–µ)"}, {"de": "sich eignen f√ºr + A", "bg": "–ø–æ–¥—Ö–æ–¥—è—â —Å—ä–º –∑–∞"}, {"de": "sich einlassen –Ω–∞ + A", "bg": "–≤–ø—É—Å–∫–∞–º —Å–µ –≤"}, {"de": "ersetzen durch + A", "bg": "–∑–∞–º–µ–Ω—è–º —Å"}, {"de": "folgen aus + D", "bg": "—Å–ª–µ–¥–≤–∞ –æ—Ç"}, {"de": "gewinnen an + D", "bg": "–ø–µ—á–µ–ª—è –æ—Ç–∫—ä–º"}, {"de": "sich halten –∑–∞ + A", "bg": "—Å—á–∏—Ç–∞–º —Å–µ –∑–∞"}, {"de": "handeln mit + D", "bg": "—Ç—ä—Ä–≥—É–≤–∞–º —Å"}, {"de": "investieren in + A", "bg": "–∏–Ω–≤–µ—Å—Ç–∏—Ä–∞–º –≤"}, {"de": "k√§mpfen gegen + A", "bg": "–±–æ—Ä—è —Å–µ —Å—Ä–µ—â—É"}, {"de": "klagen √ºber + A", "bg": "–æ–ø–ª–∞–∫–≤–∞–º —Å–µ –æ—Ç –±–æ–ª–∫–∞"}, {"de": "nutzen als + N", "bg": "–∏–∑–ø–æ–ª–∑–≤–∞–º –∫–∞—Ç–æ"}, {"de": "profitieren von + D", "bg": "–ø—Ä–æ—Ñ–∏—Ç–∏—Ä–∞–º –æ—Ç"}, {"de": "schimpfen mit + D", "bg": "–∫–∞—Ä–∞–º —Å–µ –Ω–∞"}, {"de": "schuld sein an + D", "bg": "–≤–∏–Ω–æ–≤–µ–Ω —Å—ä–º –∑–∞"}, {"de": "sich spezialisieren auf + A", "bg": "—Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–∞–º —Å–µ –≤"}, {"de": "sich treffen mit + D", "bg": "—Å—Ä–µ—â–∞–º —Å–µ —Å"}, {"de": "√ºberreden zu + D", "bg": "–±–ª–∞–∑–Ω—è –∫—ä–º"}, {"de": "vergleichen mit + D", "bg": "—Å—Ä–∞–≤–Ω—è–≤–∞–º —Å"}, {"de": "verstehen von + D", "bg": "—Ä–∞–∑–±–∏—Ä–∞–º –æ—Ç"}, {"de": "zusammen h√§ngen mit + D", "bg": "—Å–≤—ä—Ä–∑–∞–Ω –µ —Å"}
];

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø—ä–ª–≤–∞–Ω–µ –¥–æ 255 –∞–∫–æ –ª–∏–ø—Å–≤–∞—Ç
while(baseData.length < 255) baseData.push({...baseData[baseData.length % baseData.length]});

let data = [...baseData].sort((a,b) => a.de.localeCompare(b.de));
let index = 0, errors = 0, mode = 'fc', side = 'bgde', answered = false;

function updateSizeLabel(v) { document.getElementById('size-val').innerText = v; }

function applySize() {
    let size = parseInt(document.getElementById('size-slider').value);
    data = [...baseData].sort(() => Math.random() - 0.5).slice(0, size);
    index = 0;
    document.getElementById('stat-total').innerText = data.length;
    update();
}

function shuffleData() { data.sort(() => Math.random() - 0.5); index = 0; update(); }

function setMode(m) {
    mode = m;
    ['m-fc','m-qz','m-wr'].forEach(id => document.getElementById(id).classList.toggle('active', id === 'm-'+m));
    document.getElementById('fc-container').style.display = m === 'fc' ? 'block' : 'none';
    document.getElementById('main-area').style.display = m !== 'fc' ? 'flex' : 'none';
    update();
}

function setSide(s) {
    side = s;
    document.getElementById('s-bgde').classList.toggle('active', s === 'bgde');
    document.getElementById('s-debg').classList.toggle('active', s === 'debg');
    update();
}

function colorize(text) {
    return text.replace(/\+ A/g, '<span class="txt-akk">+ A</span>').replace(/\+ D/g, '<span class="txt-dat">+ D</span>');
}

function update() {
    if(!data[index]) index = 0;
    const item = data[index];
    answered = false;
    document.getElementById('stat-idx').innerText = index + 1;
    document.getElementById('stat-err').innerText = errors;
    
    const q = side === 'bgde' ? item.bg : item.de;
    const a = side === 'bgde' ? item.de : item.bg;

    if(mode === 'fc') {
        document.getElementById('fc-container').classList.remove('flipped');
        document.getElementById('fc-front').innerHTML = side === 'bgde' ? q : colorize(q);
        document.getElementById('fc-back').innerHTML = side === 'bgde' ? colorize(a) : a;
    } else if(mode === 'qz') { loadQuiz(); } 
    else if(mode === 'wr') { loadWrite(); }
}

function loadQuiz() {
    document.getElementById('qz-area').style.display = 'block';
    document.getElementById('wr-area').style.display = 'none';
    const item = data[index];
    const correctAns = side === 'bgde' ? item.de : item.bg;
    document.getElementById('qz-q').innerText = side === 'bgde' ? item.bg : item.de;
    
    let opts = [correctAns];
    while(opts.length < 4) {
        let r = baseData[Math.floor(Math.random()*baseData.length)];
        let v = side === 'bgde' ? r.de : r.bg;
        if(!opts.includes(v)) opts.push(v);
    }
    opts.sort(() => Math.random()-0.5);
    
    const box = document.getElementById('qz-opts');
    box.innerHTML = '';
    opts.forEach(o => {
        const b = document.createElement('button');
        b.className = 'opt';
        b.innerHTML = colorize(o);
        b.onclick = () => {
            if(answered) return;
            answered = true;
            if(o === correctAns) {
                b.classList.add('correct');
                setTimeout(()=>move(1), 800);
            } else {
                b.classList.add('wrong');
                errors++;
                document.getElementById('stat-err').innerText = errors;
                setTimeout(()=>move(1), 1500);
            }
        };
        box.appendChild(b);
    });
}

function loadWrite() {
    document.getElementById('qz-area').style.display = 'none';
    document.getElementById('wr-area').style.display = 'block';
    const item = data[index];
    document.getElementById('wr-q').innerText = side === 'bgde' ? item.bg : item.de;
    document.getElementById('wr-i').value = '';
    document.getElementById('wr-f').innerHTML = '';
    document.getElementById('wr-i').focus();
}

function checkWrite() {
    if(answered) return;
    const item = data[index];
    const ans = side === 'bgde' ? item.de : item.bg;
    const input = document.getElementById('wr-i').value.trim().toLowerCase();
    
    // –ü–æ-—É–º–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏ –∏ –º–∞–ª–∫–∏/–≥–æ–ª–µ–º–∏ –±—É–∫–≤–∏
    const cleanInput = input.replace(/\s?\+\s?/g, '+');
    const cleanAns = ans.toLowerCase().replace(/\s?\+\s?/g, '+');

    if(cleanInput === cleanAns) {
        document.getElementById('wr-f').innerHTML = '<span style="color:var(--success)">‚úÖ –í—è—Ä–Ω–æ!</span>';
        answered = true;
        setTimeout(()=>move(1), 1000);
    } else {
        document.getElementById('wr-f').innerHTML = `<span style="color:var(--error)">‚ùå ${colorize(ans)}</span>`;
        errors++;
        document.getElementById('stat-err').innerText = errors;
    }
}

function move(s) { index = (index + s + data.length) % data.length; update(); }

// –°—Ç–∞—Ä—Ç
update();
</script>
</body>
</html>